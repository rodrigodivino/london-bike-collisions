(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{7277:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var e=r(5893),o=r(7294),u=r(5408),i=r.n(u),a=r(6410),l=r(2568),c=Math.PI/3,f=[0,c,2*c,3*c,4*c,5*c];function s(n){return n[0]}function v(n){return n[1]}var d,m,h=r(9908);(m=d||(d={})).MINIMUM_VISIBLE_HEX_VALUE=20,m.APPROXIMATE_NUMBER_OF_COLORS=6,m.BIN_RADIUS_METERS=250;var p=r(5243),y=function(n,t,r){for(var e=t/n,o=e-e%10+10,u=[r],i=r;i<t;)i+=o,u.push(i);return u},g=function(n){var t=(0,h.B8C)(n);return t.r=255-t.opacity*(255-t.r),t.g=255-t.opacity*(255-t.g),t.b=255-t.opacity*(255-t.b),t.opacity=1,t.toString()},M=r(1203),x=r(1169);function E(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function S(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,u=[],i=!0,a=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(u.push(e.value),!t||u.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return u}}(n,t)||b(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(n){return function(n){if(Array.isArray(n))return E(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||b(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(n,t){if(n){if("string"===typeof n)return E(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(n,t):void 0}}var I=function(n){var t,r,u,m,E,b=n.data,I=n.$onColorLegendData$,A=S(function(){var n=(0,o.useState)(),t=n[0],r=n[1],e=(0,o.useRef)(null);return(0,o.useEffect)((function(){e.current&&r(e.current)}),[e]),[t,e]}(),2),R=A[0],w=A[1],N=S((0,a.n)(w),2),L=N[0],j=N[1],z=(0,o.useState)([]),C=z[0],U=z[1],B=(0,o.useContext)(M.X)[0];(0,o.useLayoutEffect)((function(){var n;(null===B||void 0===B?void 0:B.zoomAnim)||U((0,l.S)((function(t){var r,e;return null!==(n=null===B||void 0===B||null===(r=B.mapRef)||void 0===r||null===(e=r.current)||void 0===e?void 0:e.project([t.Latitude,t.Longitude]))&&void 0!==n?n:{x:0,y:0}}),b))}),[b,null===B||void 0===B?void 0:B.mapRef,null===B||void 0===B?void 0:B.zoomAnim]);for(var O,V=(0,o.useMemo)((function(){var n,t,r,e,o,u,i,a=new p.LatLng(b[0].Latitude,b[0].Longitude).toBounds(d.BIN_RADIUS_METERS),l=Math.abs((null!==(o=null===B||void 0===B||null===(n=B.mapRef)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.project(a.getNorthEast()).x)&&void 0!==o?o:0)-(null!==(u=null===B||void 0===B||null===(r=B.mapRef)||void 0===r||null===(e=r.current)||void 0===e?void 0:e.project(a.getNorthWest()).x)&&void 0!==u?u:0)),m=null!==(i=C[0])&&void 0!==i?i:{x:0,y:0},h=function(){var n,t,r,e=0,o=0,u=1,i=1,a=s,l=v;function d(n){var e,o={},u=[],i=n.length;for(e=0;e<i;++e)if(!isNaN(f=+a.call(null,c=n[e],e,n))&&!isNaN(s=+l.call(null,c,e,n))){var c,f,s,v=Math.round(s/=r),d=Math.round(f=f/t-(1&v)/2),m=s-v;if(3*Math.abs(m)>1){var h=f-d,p=d+(f<d?-1:1)/2,y=v+(s<v?-1:1),g=f-p,M=s-y;h*h+m*m>g*g+M*M&&(d=p+(1&v?1:-1)/2,v=y)}var x=d+"-"+v,E=o[x];E?E.push(c):(u.push(E=o[x]=[c]),E.x=(d+(1&v)/2)*t,E.y=v*r)}return u}function m(n){var t=0,r=0;return f.map((function(e){var o=Math.sin(e)*n,u=-Math.cos(e)*n,i=o-t,a=u-r;return t=o,r=u,[i,a]}))}return d.hexagon=function(t){return"m"+m(null==t?n:+t).join("l")+"z"},d.centers=function(){for(var a=[],l=Math.round(o/r),c=Math.round(e/t),f=l*r;f<i+n;f+=r,++l)for(var s=c*t+(1&l)*t/2;s<u+t/2;s+=t)a.push([s,f]);return a},d.mesh=function(){var t=m(n).slice(0,4).join("l");return d.centers().map((function(n){return"M"+n+"m"+t})).join("")},d.x=function(n){return arguments.length?(a=n,d):a},d.y=function(n){return arguments.length?(l=n,d):l},d.radius=function(e){return arguments.length?(t=2*(n=+e)*Math.sin(c),r=1.5*n,d):n},d.size=function(n){return arguments.length?(e=o=0,u=+n[0],i=+n[1],d):[u-e,i-o]},d.extent=function(n){return arguments.length?(e=+n[0][0],o=+n[0][1],u=+n[1][0],i=+n[1][1],d):[[e,o],[u,i]]},d.radius(1)}().x((function(n){return n.x-m.x})).y((function(n){return n.y-m.y})).radius(l),y=h(C);return y.forEach((function(n){n.x+=m.x,n.y+=m.y})),[y,h.hexagon(),l]}),[b,null===B||void 0===B?void 0:B.mapRef,C]),T=V[0],D=V[1],H=V[2],P=(0,o.useMemo)((function(){return(0,h.Fp7)(T,(function(n){return n.length}))}),[T]),W=(0,o.useMemo)((function(){return y(d.APPROXIMATE_NUMBER_OF_COLORS+1,P,d.MINIMUM_VISIBLE_HEX_VALUE)}),[P]),X=W.slice(0,-1).map((function(n,t,r){var e=t/(r.length-1),o=(0,h.B8C)((0,h.bc$)(.1+.5*e));return o.opacity=.5,o.toString()})),k=(0,h.ut0)().domain(W).range(["blue"].concat(_(X),["red"])),$=[],F=k.domain(),G=k.range(),q=-1;q<F.length;q++){var Z,J,K=null!==(Z=F[q])&&void 0!==Z?Z:-1/0,Q=null!==(J=F[q+1])&&void 0!==J?J:1/0;$.push({threshold:[K,Q],color:g(G[q+1]).toString()})}(0,o.useEffect)((function(){null===I||void 0===I||I($)}));var Y=null!==(O=null===B||void 0===B||null===(t=B.mapRef)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.project(null===B||void 0===B||null===(u=B.mapRef)||void 0===u||null===(m=u.current)||void 0===m?void 0:m.getBounds().getNorthWest()))&&void 0!==O?O:{x:0,y:0},nn=new Path2D(D),tn=null===R||void 0===R?void 0:R.getContext("2d");if(tn){tn.resetTransform(),tn.clearRect(0,0,L,j),tn.fillStyle="rgba(255, 255, 255, 0.2)",tn.fillRect(0,0,L,j),tn.translate(-Y.x,-Y.y);for(var rn=0;rn<T.length;rn++){var en=T[rn];en.x-Y.x<-2*H||(en.x-Y.x>L+2*H||en.y-Y.y<-2*H||en.y-Y.y>j+2*H||en.length<d.MINIMUM_VISIBLE_HEX_VALUE||(tn.translate(en.x,en.y),tn.fillStyle=k(en.length),tn.fill(nn),tn.translate(-en.x,-en.y)))}}var on=(0,x.t)(null===B||void 0===B?void 0:B.zoomAnim,null===B||void 0===B||null===(E=B.mapRef)||void 0===E?void 0:E.current).zoomAnimMimic;return(0,e.jsx)("div",{className:i().wrapper,children:(0,e.jsx)("canvas",{style:on,width:L,height:j,ref:w,className:i().canvas},"canvas")})}},1169:function(n,t,r){"use strict";r.d(t,{t:function(){return e}});var e=function(n,t){if(n&&t){var r,e,o,u=t.getCenter(),i=n.center,a=n.zoom-(null!==(r=t.getZoom())&&void 0!==r?r:0),l=null!==(e=t.project(u))&&void 0!==e?e:{x:0,y:0},c=null!==(o=t.project(i))&&void 0!==o?o:{x:0,y:0},f=l.x-c.x,s=l.y-c.y;return{zoomAnimMimic:{transform:"scale(".concat(Math.pow(2,a),")translate(").concat(f,"px, ").concat(s,"px)"),transition:"transform 0.25s"},zoomAnimMimicScaleInverse:{transform:"scale(".concat(1/Math.pow(2,a),")"),transition:"transform 0.25s"}}}return{zoomAnimMimic:{transform:"translate(0,0)",transition:"transform 0s"},zoomAnimMimicScaleInverse:{transform:"translate(0,0)",transition:"transform 0s"}}}},2568:function(n,t,r){"use strict";r.d(t,{S:function(){return e}});var e=function(n,t){return t.map((function(t){var r,e=null!==(r=n(t))&&void 0!==r?r:[0,0];return{x:e.x,y:e.y,d:t}}))}},6410:function(n,t,r){"use strict";r.d(t,{n:function(){return o}});var e=r(7294),o=function(n){var t=(0,e.useState)(100),r=t[0],o=t[1],u=(0,e.useState)(100),i=u[0],a=u[1];return(0,e.useEffect)((function(){if(n.current){o(n.current.clientWidth),a(n.current.clientHeight);var t=new ResizeObserver((function(){n.current&&(o(n.current.clientWidth),a(n.current.clientHeight))}));if(!n.current.parentElement||"DIV"!==n.current.parentElement.tagName)throw new Error("useResponsiveSVG requires the SVG or Canvas to be a child of HTMLDivElement");return t.observe(n.current.parentElement),function(){t.disconnect()}}}),[n]),[r,i]}},5408:function(n){n.exports={wrapper:"canvas-overlay_wrapper__cbWz0",canvas:"canvas-overlay_canvas__UxWn_"}}}]);